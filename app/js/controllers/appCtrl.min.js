ChatApp.controller("appCtrl",["$scope","$rootScope","$http","$state","$sessionStorage","$filter","$mdToast","$mdMenu","$timeout","CONFIG",function(e,s,t,o,a,n,r,i,l,g){e.selected="dashboard",e.showLoginArea=!0,e.toggleList=function(){$mdSidenav("left").toggle()},e.openMenu=function(e){i.open(e)},e.register={name:"",email:"",mobile:"",registeredDate:new Date},e.lodinData={password:"",email:"",loginDate:new Date},e.submitForm=function(){e.loading=!0,e.register.registeredDate=n("date")(e.register.registeredDate,"yyyy-MM-dd HH:mm:ss"),t({method:"POST",url:g.rootUrl+"registerUser",headers:{"Content-Type":"application/json"},data:e.register}).then(function(s){e.loading=!1,1==s.data.success?(a.userData=s.data.userData[0],e.msgContent="Registeration successfully.",e.toasterClass="successClass",e.showAlertMessage(),o.go("home.dashboard")):(e.msgContent="Registeration failed.",e.toasterClass="warningClass",e.showAlertMessage())})},e.login=function(){""!=e.register.email?e.checkUserExist("login"):(e.msgContent="Please input email address.",e.toasterClass="warningClass",e.showAlertMessage())},e.checkUserExist=function(s){e.loading=!0;var n={email:e.register.email};t({method:"POST",url:g.rootUrl+"checkUserExist",headers:{"Content-Type":"application/json"},data:n}).then(function(t){e.loading=!1,1==t.data.success?(a.userData=t.data.userData[0],"login"==s?(o.go("home.dashboard"),e.msgContent="Login successfully.",e.toasterClass="successClass"):(e.msgContent="Your email id is registered with us, please login to continue.",e.toasterClass="warningClass"),e.showAlertMessage()):"login"==s&&(e.msgContent="Your email is id not registeration with us, please register and continue.",e.toasterClass="errorClass",e.showAlertMessage())})},e.showView=function(s){"register"==s?(e.showLoginArea=!1,e.showRegisterArea=!0):(e.showRegisterArea=!1,e.showLoginArea=!0)},e.showAlertMessage=function(){r.show(r.simple().textContent(e.msgContent).position("top left").hideDelay(3e3).toastClass(e.toasterClass))},e.getUserData=function(s){"chat"==s?(e.showMenuIcon=!1,e.showBackIcon=!0):(e.showBackIcon=!1,e.showMenuIcon=!0),e.userData=a.userData},e.logout=function(){o.go("login"),a.$reset()},e.goBack=function(){o.go("home.dashboard")},s.pageTitle=function(){return e.title=o.current.title,e.title}}]);
